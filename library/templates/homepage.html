{% extends "layout.html" %} {% load staticfiles %} {% block title %}Homepage{% endblock %} {% block head %}
<link rel="stylesheet" href="{% static 'library/css/styles.css' %}">


<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- <link rel="stylesheet" href="{% static 'library/css/catalog.css' %}">  -->

<style type="text/css">
  th:hover{
    cursor:pointer;
    background:#AAA;
  }
</style>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<link rel="stylesheet" href="{% static 'library/css/lightslider.css' %}" />
<style>
    ul {
        list-style: none outside none;
        padding-left: 0;
        margin: 0;
    }

    .content-slider li {
        /*background-color: #ed3020;*/
        background-color: #FFFFFF;
        text-align: center;
        color: #FFF;
        height: 100%;
    }

    .content-slider {
        height: 400px;
    }

    .content-slider h3 {
        margin: 0;
        padding: 0px 0;
    }

    .rcorners2 {
        /*border-radius: 25px;*/
        border: 2px solid #73AD21;
        /*padding: 20px; */

    }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="{% static 'library/js/lightslider.js' %}"></script>
<script>
    $(document).ready(function() {
        $("#content-slider4").lightSlider({

            auto: true,
            loop: true,
            keyPress: true,
            //  pauseOnHover: true,
        });
        $("#content-slider1").lightSlider({
            slideMargin: 4,
            auto: true,
            loop: true,
            keyPress: true,
            // pauseOnHover: true,
        });
        $("#content-slider2").lightSlider({
            auto: true,
            loop: true,
            keyPress: true,
            // pauseOnHover: true,
        });
        $("#content-slider3").lightSlider({
            auto: true,
            loop: true,
            keyPress: true,
            // pauseOnHover: true,
        });

        $("#sliderPopularBook").lightSlider({
            auto: true,
            loop: true,
            keyPress: true,
            // pauseOnHover: true,
        });
        $("#sliderNewlyBook").lightSlider({
            auto: true,
            loop: true,
            keyPress: true,
            // pauseOnHover: true,
        });

    });
</script>

{% endblock %} {% block content %}

<div class="page-content" style="font-family: 'Handlee';  font-size: 105% ">
    <div class="mdl-grid page-max-width ">
        <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">
                <div class="mdl-cell mdl-cell--5-col " >
                    <div class="mdl-grid " style="width:100%;  padding-top: 0px" >
                         <h3 style=" color:#006EA1 !important; margin-bottom:0px; margin-top:20px; font-family: 'Handlee';"  >
                              News
                         </h3>
                    </div>

                     <div class="mdl-grid mdl-js-data-table  mdl-shadow--2dp" style="width:100%; height:336px;  word-wrap: break-word;  border: 1px solid rgba(0,0,0,.12); margin-top:10px; padding: 15px; ">

                            - Fixed Morphling causing performance issues in bot games.<br>
                            - Fixed bots not using the specified difficulty level.<br>
                            - Fixed issue where some team emoticons weren’t working with :pro_team:<br>
                            - Fixed the interaction between Rubick’s Spell Steal, Treant Protector’s Eyes in the Forest and Techies’ Land Mines.<br>
                      </div>
                </div>
                <div class="mdl-cell mdl-cell--7-col " >
                     <div class=" " style="width:100%; padding-top: 0px" >
                            <h3 style=" color:#006EA1 !important; margin-bottom:0px; margin-top:20px; font-family: 'Handlee';"  >
                                   Last Update
                            </h3>
                      </div>

                      <div class="mdl-grid " style="  width:100% ; margin-top:10px;" >
                            <table id="lastUpdateTable" class="mdl-data-table mdl-js-data-table  mdl-shadow--2dp" >
                                  <thead >
                                    <tr >
                                      <th id="sortX"> </th>
                                      <th id="sortUser" style="font-weight: bold; font-size: 120% !important;">Username</th>
                                      <th id="sortBookName" style="font-weight: bold; font-size: 120% !important;">Book Name</th>
                                      <th id="sortStatus" style="font-weight: bold; font-size: 120% !important;">Status</th>
                                      <th id="sortDate" style="font-weight: bold; font-size: 120% !important;  text-align: center; " >Date</th>
                                    </tr>
                                  </thead>

                                  {% for eachTran in newlyTransaction %}
                                      <tr>
                                        <td style=" text-align: center; ">
                                            {{forloop.counter}}
                                        </td>
                                        <td style=" text-align: center;">
                                            {{eachTran.student.user.username}}
                                        </td>
                                        <td style=" text-align: center;" >
                                            {{eachTran.book.name}}
                                        </td>
                                        <td style=" text-align: center; ">
                                            {{eachTran.get_status_display}}
                                        </td>
                                        <td style=" text-align: center;">
                                            {{eachTran.date}}
                                        </td>
                                      </tr>

                                  {% endfor %}


                          </table>
                      </div>


                </div>


        </div>

         <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">  <!-- Start newly book -->
                <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">
                    <h3 style=" color:#006EA1;  margin-top:40px; margin-bottom:0px; font-family: 'Handlee';" >
                      New Books
                    </h3>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <!-- start for -- >
                          <!-- Card_1 -->
                    <div class="mdl-card cardRank">
                        <!-- <div class="mdl-card__title cardRankBG" style="background:url('../static/library/images/bg_rankCard_1.jpg') center;">
                                  <h2 class="mdl-card__title-text cardRankHeader">{{catName1}}</h2>
                              </div> -->



                        <div class="mdl-grid" style="width:100%; height:100%; padding: 0px 0px">
                            <div class="item" style="width:100%; height:100%; center;">
                                <ul id="sliderNewlyBook" class="content-slider ">
                                    {% for bookObj in newlyBook|slice:":10" %}
                                    <li>
                                        <div class="mdl-grid" style="padding:0px;">
                                            <div class="mdl-cell mdl-cell--12-col" style="margin:0px; margin-bottom:6px;" align="center">
                                                <b style="font-size: 20px; color:#008CBA;">
                                                      {{forloop.counter}}

                                                      {% if forloop.counter == 1 %}
                                                          st
                                                      {% endif %}
                                                      {% if forloop.counter == 2 %}
                                                          nd
                                                      {% endif %}
                                                      {% if forloop.counter == 3 %}
                                                          rd
                                                      {% endif %}
                                                      {% if forloop.counter > 3 %}
                                                          th
                                                      {% endif %}
                                                    </b>

                                                <br>
                                            </div>
                                            <div class="mdl-cell mdl-cell--12-col" style="margin:0px; margin-bottom:6px;" align="center">
                                                <div align="center">
                                                    {% if bookObj.picture != 'False' %}
                                                    <img class="article-image" src="{{bookObj.picture.url}}" alt="" border="2" style="width: 150px; height: 200px;">
                                                    {% else %}
                                                    <img class="article-image" src="{% static 'library/images/no_cover_thumnail.jpg' %}"  alt="" border="0" style="width: 150px; height: 200px;">
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="mdl-cell mdl-cell--12-col mdl-card__supporting-text" style="text-align: center; margin:0px; padding-top:0px; padding-bottom:0px; word-wrap: break-word; ">
                                                <h1 style="font-size: 14px;color:#008CBA; margin:0px;">
                                                    <a href="/lib/catalog/{{bookObj.id}}">
                                                      {{bookObj.name}} 
                                                    </a>
                                                </h1>
                                                {{bookObj.author}}<br>
                                                {{bookObj.category.name}}<br>
                                            </div>
                                        </div>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end for -->

          </div><!-- end newly book -->



        <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">  <!-- Start Cata -->
                <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">
                    <h3 style=" color:#006EA1;  margin-top:40px; margin-bottom:0px; font-family: 'Handlee';" >
                      Popular Books of the Month
                    </h3>
                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <!-- start for -- >
                          <!-- Card_1 -->
                    <div class="mdl-card cardRank">
                        <!-- <div class="mdl-card__title cardRankBG" style="background:url('../static/library/images/bg_rankCard_1.jpg') center;">
                                  <h2 class="mdl-card__title-text cardRankHeader">{{catName1}}</h2>
                              </div> -->



                        <div class="mdl-grid" style="width:100%; height:100%; padding: 0px 0px">
                            <div class="item" style="width:100%; height:100%; center;">
                                <ul id="sliderPopularBook" class="content-slider ">
                                    {% for bookObj in popularBooks|slice:":10" %}
                                    <li>
                                        <div class="mdl-grid" style="padding:0px;">
                                            <div class="mdl-cell mdl-cell--12-col" style="margin:0px; margin-bottom:6px;" align="center">
                                                <b style="font-size: 20px; color:#008CBA;">
                                                      {{forloop.counter}}

                                                      {% if forloop.counter == 1 %}
                                                          st
                                                      {% endif %}
                                                      {% if forloop.counter == 2 %}
                                                          nd
                                                      {% endif %}
                                                      {% if forloop.counter == 3 %}
                                                          rd
                                                      {% endif %}
                                                      {% if forloop.counter > 3 %}
                                                          th
                                                      {% endif %}
                                                    </b>

                                                <br>
                                            </div>
                                            <div class="mdl-cell mdl-cell--12-col" style="margin:0px; margin-bottom:6px;" align="center">
                                                <div align="center">
                                                    {% if bookObj.1.1.picture != 'False' %}
                                                    <img class="article-image" src="{{bookObj.1.1.picture.url}}" alt="" border="2" style="width: 150px; height: 200px;"> {% else %}
                                                    <img class="article-image" src="{% static 'library/images/no_cover_thumnail.jpg' %}" border="2" style="width: 150px; height: 200px;"> {% endif %}
                                                </div>
                                            </div>
                                            <div class="mdl-cell mdl-cell--12-col mdl-card__supporting-text" style="text-align: center; margin:0px; padding-top:0px; padding-bottom:0px;">
                                                <h1 style="font-size: 14px;color:#008CBA; margin:0px;">
                                                    <a href="/lib/catalog/{{bookObj.1.1.id}}">
                                                      {{bookObj.1.1.name}}
                                                    </a>
                                                </h1>
                                                {{bookObj.1.1.category.name}}<br>  Borrowed:{{bookObj.1.0}} {% if bookObj.1.0 > 1%} times {% else %} time {% endif %}
                                            </div>
                                        </div>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end for -->

          </div><!-- end Cata -->


          <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">  <!-- Start Cata -->
                <div class="mdl-grid" style="width:100%; height:100%; padding-top: 0px">
                    <h3 style=" color:#006EA1;  margin-top:40px; margin-bottom:0px; font-family: 'Handlee';" >
                      Popular Categories of the Month
                    </h3>
                </div>
                {% for categorylist in listShow|slice:":4" %}
                <div class="mdl-cell mdl-cell--12-col">
                    <!-- start for -- >
                          <!-- Card_1 -->
                    <div class="mdl-card cardRank">
                        <!-- <div class="mdl-card__title cardRankBG" style="background:url('../static/library/images/bg_rankCard_1.jpg') center;">
                                  <h2 class="mdl-card__title-text cardRankHeader">{{catName1}}</h2>
                              </div> -->

                        <div class="mdl-grid" style="width:100%; height:100%; margin:0px!important;">
                            <div class="mdl-cell mdl-cell--1-col">

                            </div>
                            <div class="mdl-cell mdl-cell--11-col" align="left">
                                <h4 style=" color:#A5AACB ; margin:0px!important; font-family: 'Handlee' !important; font-size: 180% !important; ">{{categorylist.0}}</h4>
                            </div>
                        </div>

                        <div class="mdl-grid" style="width:100%; height:100%; padding: 0px 0px">
                            <div class="item" style="width:100%; height:100%; center;">
                                <ul id="content-slider{{forloop.counter}}" class="content-slider ">
                                    {% for bookObj in categorylist.1|slice:":10" %}
                                    <li>
                                        <div class="mdl-grid" style="padding:0px;">
                                            <div class="mdl-cell mdl-cell--12-col" style="margin:0px; margin-bottom:6px;" align="center">
                                                <b style="font-size: 20px; color:#008CBA;">
                                                        {{forloop.counter}}

                                                        {% if forloop.counter == 1 %}
                                                            st
                                                        {% endif %}
                                                        {% if forloop.counter == 2 %}
                                                            nd
                                                        {% endif %}
                                                        {% if forloop.counter == 3 %}
                                                            rd
                                                        {% endif %}
                                                        {% if forloop.counter > 3 %}
                                                            th
                                                        {% endif %}
                                                      </b>

                                                <br>
                                            </div>
                                            <div class="mdl-cell mdl-cell--12-col" style="margin:0px; margin-bottom:6px;" align="center">
                                                <div align="center">
                                                    {% if bookObj.1.1.picture != 'False' %}
                                                    <img class="article-image" src="{{bookObj.1.1.picture.url}}" alt="" border="2" style="width: 150px; height: 200px;"> {% else %}
                                                    <img class="article-image" src="{% static 'library/images/no_cover_thumnail.jpg' %}" alt="" border="2" style="width: 150px; height: 200px;">{% endif %}
                                                </div>
                                            </div>
                                            <div class="mdl-cell mdl-cell--12-col mdl-card__supporting-text" style="text-align: center; margin:0px; padding-top:0px; padding-bottom:0px;">
                                                <h1 style="font-size: 14px;color:#008CBA; margin:0px;"><a href="/lib/catalog/{{bookObj.1.1.id}}">{{bookObj.1.1.name}}</a></h1> {{bookObj.1.1.author}}<br> Borrowed: {{bookObj.1.0}} {% if bookObj.1.0 > 1%} times {% else %} time {% endif %}
                                            </div>
                                        </div>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end for -->
                {% endfor %}
          </div><!-- end Cata -->



    </div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
    function sortTable(f,n){
      var rows = $('#lastUpdateTable tbody  tr').get();

      rows.sort(function(a, b) {

        var A = getVal(a);
        var B = getVal(b);

        if(A < B) {
          return -1*f;
        }
        if(A > B) {
          return 1*f;
        }
        return 0;
      });

      function getVal(elm){
        var v = $(elm).children('td').eq(n).text().toUpperCase();
        if($.isNumeric(v)){
          v = parseInt(v,10);
        }
        return v;
      }

      $.each(rows, function(index, row) {
        $('#lastUpdateTable').children('tbody').append(row);
      });
    }
    var f_X = 1;
    var f_user = 1;
    var f_bookName = 1;
    var f_status = 1;
    var f_date = 1;
    $("#sortX").click(function(){
        f_X *= -1;
        var n = $(this).prevAll().length;
        sortTable(f_X, n);
    });
    $("#sortUser").click(function(){
        f_user *= -1;
        var n = $(this).prevAll().length;
        sortTable(f_user, n);
    });
    $("#sortBookName").click(function(){
        f_bookName *= -1;
        var n = $(this).prevAll().length;
        sortTable(f_bookName, n);
    });
    $("#sortStatus").click(function(){
        f_status *= -1;
        var n = $(this).prevAll().length;
        sortTable(f_status, n);
    });
    $("#sortDate").click(function(){
        f_date *= -1;
        var n = $(this).prevAll().length;
        sortTable(f_date, n);
    });
</script>
{% endblock%}
